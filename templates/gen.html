<!doctype html>
<title>URL Shortener</title>
<h1>URL Shortener</h1>
<form action="/shorten" method="post">
    <label for="url">Enter URL:</label>
    <input type="text" id="url" name="url" required><br><br>
    <label for="custom_code">Custom Code (optional):</label>
    <input type="text" id="custom_code" name="custom_code"><br><br>
    <label for="length">Max Length:</label>
    <input type="number" id="length" name="length" min="1" value="6"><br><br>
    <label for="allow_numbers">Allow Numbers:</label>
    <input type="checkbox" id="allow_numbers" name="allow_numbers" checked><br><br>
    <label for="allow_special">Allow Special Characters:</label>
    <input type="checkbox" id="allow_special" name="allow_special"><br><br>
    <label for="allow_uppercase">Allow Uppercase Letters:</label>
    <input type="checkbox" id="allow_uppercase" name="allow_uppercase" checked><br><br>
    <label for="allow_lowercase">Allow Lowercase Letters:</label>
    <input type="checkbox" id="allow_lowercase" name="allow_lowercase" checked><br><br>
    <label for="expiry_time">Expiry Time (optional, format: YYYY-MM-DD HH:MM:SS):</label>
    <input type="text" id="expiry_time" name="expiry_time"><br><br>
    <label for="password">Password (optional):</label>
    <input type="password" id="password" name="password"><br><br>
    <button type="submit">Shorten</button>
</form>
<h2>Shortened URLs</h2>
<table border="1">
    <tr>
        <th>Short Code</th>
        <th>Shortened URL</th>
        <th>Original URL</th>
        <th>IP Address</th>
        <th>Click Count</th>
        <th>Expiry Time</th>
        <th>Password Protected</th>
    </tr>
    {% for row in urls %}
    <tr>
        <td>{{ row.short_code }}</td>
        <td><a href="{{ url_for('redirect_to_url', code=row.short_code, _external=True) }}" target="_blank">{{ url_for('redirect_to_url', code=row.short_code, _external=True) }}</a></td>
        <td>{{ row.original_url }}</td>
        <td>{{ row.ip_address }}</td>
        <td>{{ row.click_count }}</td>
        <td>{{ row.expiry_time }}</td>
        <td>{{ 'Yes' if row.password else 'No' }}</td>
    </tr>
    {% endfor %}
</table>
